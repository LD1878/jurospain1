---
layout: default
title: Free NIE Application Generator (EX-15)
permalink: /tools/nie-generator/
---

<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
<script src="https://unpkg.com/@pdf-lib/fontkit@0.0.4/dist/fontkit.umd.min.js"></script>

<style>
    /* LAYOUT: SPLIT SCREEN */
    .wizard-container {
        display: flex;
        gap: 40px;
        max-width: 1200px;
        margin: 4rem auto;
        font-family: 'Inter', sans-serif;
    }

    /* LEFT SIDE: THE FORM */
    .wizard-form {
        flex: 2;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }

    /* RIGHT SIDE: THE ADVICE BRAIN */
    .wizard-advice {
        flex: 1;
        position: sticky;
        top: 120px; /* Sticks as you scroll */
        height: fit-content;
        background: #002868; /* Juro Navy */
        color: white;
        padding: 2rem;
        border-radius: 12px;
        border-left: 5px solid #E30613; /* Juro Red */
        transition: all 0.3s ease;
    }

    .advice-title {
        text-transform: uppercase;
        font-family: 'Oswald', sans-serif;
        letter-spacing: 1px;
        font-size: 1.1rem;
        margin-bottom: 1rem;
        color: #C5A059; /* Gold */
    }

    .advice-text {
        font-size: 0.95rem;
        line-height: 1.6;
        opacity: 0.9;
    }

    /* INPUT STYLING */
    .input-group { margin-bottom: 1.5rem; }
    
    label { 
        display: block; 
        font-weight: 700; 
        margin-bottom: 0.5rem; 
        color: #333; 
    }

    input, select {
        width: 100%;
        padding: 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1rem;
    }

    input:focus, select:focus {
        border-color: #E30613;
        outline: none;
    }

    .btn-download {
        background: #E30613;
        color: white;
        width: 100%;
        padding: 1rem;
        border: none;
        border-radius: 50px;
        font-weight: bold;
        font-size: 1.1rem;
        cursor: pointer;
        margin-top: 2rem;
    }

    @media (max-width: 900px) {
        .wizard-container { flex-direction: column-reverse; }
        .wizard-advice { position: static; margin-bottom: 2rem; }
    }
</style>

<div class="wizard-container">
    
    <div class="wizard-form">
        <h2 style="margin-top: 0; color: #002868;">1. Applicant Details</h2>
        
        <div class="input-group">
            <label>Passport Number</label>
            <input type="text" id="passport" onfocus="showAdvice('passport')">
        </div>

        <div class="input-group">
            <label>First Name (Nombre)</label>
            <input type="text" id="firstname" onfocus="showAdvice('names')">
        </div>

        <div class="input-group">
            <label>Surname (Apellidos)</label>
            <input type="text" id="surname" onfocus="showAdvice('names')">
        </div>

        <div class="input-group">
            <label>Father's Name</label>
            <input type="text" id="father" onfocus="showAdvice('parents')">
        </div>

        <div class="input-group">
            <label>Mother's Name</label>
            <input type="text" id="mother" onfocus="showAdvice('parents')">
        </div>

        <h2 style="margin-top: 2rem; color: #002868;">2. Reason for NIE</h2>
        <div class="input-group">
            <label>Why do you need this NIE?</label>
            <select id="reason" onfocus="showAdvice('reason')">
                <option value="bank">Opening a Bank Account</option>
                <option value="house">Buying Property</option>
                <option value="company">Setting up a Company</option>
            </select>
        </div>

        <button class="btn-download" onclick="generateStandardEX15()">Generate Official PDF</button>
        <p id="msg" style="text-align: center; margin-top: 10px; display:none;">âœ… Generating...</p>
    </div>

    <div class="wizard-advice" id="adviceBox">
        <div class="advice-title">ðŸ’¡ JuroSpain Legal Tip</div>
        <div class="advice-text" id="adviceText">
            Click on any field to see specific legal advice for that section. 
            <br><br>
            We help you fill this correctly so you don't get rejected at the appointment.
        </div>
    </div>

</div>

<script>
    // 1. DYNAMIC ADVICE LOGIC
    const adviceLibrary = {
        'default': "Click on any field to see specific legal advice...",
        'passport': "Ensure this matches your current valid passport exactly. If you renew your passport before the appointment, you must bring both the old and new one.",
        'names': "Write your name exactly as it appears in the machine-readable zone (bottom lines) of your passport. Do not use nicknames.",
        'parents': "Mandatory in Spain. This is used to distinguish you from others with similar names. Use your parents' First Names only.",
        'reason': "This auto-selects 'Economic Interests' on the form. This is the safest category for non-residents. Do not select 'Professional' unless you have a job offer."
    };

    function showAdvice(key) {
        document.getElementById('adviceText').innerText = adviceLibrary[key] || adviceLibrary['default'];
    }

    // 2. PDF GENERATION (Standard Coordinates Pre-Loaded)
    const { PDFDocument, StandardFonts } = PDFLib;

    async function generateStandardEX15() {
        document.getElementById('msg').style.display = 'block';
        
        try {
            // Load your blank EX-15
            const url = '/assets/pdf/ex15.pdf';
            const existingPdfBytes = await fetch(url).then(res => res.arrayBuffer());

            const pdfDoc = await PDFDocument.load(existingPdfBytes);
            const firstPage = pdfDoc.getPages()[0];
            const font = await pdfDoc.embedFont(StandardFonts.Helvetica);
            const size = 10;

            // --- PRE-CALCULATED COORDINATES FOR STANDARD EX-15 ---
            // If text is slightly off, tweak these numbers (X = Left/Right, Y = Up/Down)
            
            // Passport (Top Right)
            firstPage.drawText(document.getElementById('passport').value.toUpperCase(), { x: 480, y: 725, size: 12, font: font });

            // Surname (Left)
            firstPage.drawText(document.getElementById('surname').value.toUpperCase(), { x: 40, y: 685, size: size, font: font });

            // First Name (Right)
            firstPage.drawText(document.getElementById('firstname').value.toUpperCase(), { x: 350, y: 685, size: size, font: font });

            // Parents
            firstPage.drawText(document.getElementById('father').value.toUpperCase(), { x: 40, y: 615, size: size, font: font });
            firstPage.drawText(document.getElementById('mother').value.toUpperCase(), { x: 300, y: 615, size: size, font: font });

            // CHECKBOX LOGIC (Section 4.2 Economic)
            // We draw an 'X' in the "Economic Interests" box
            firstPage.drawText('X', { x: 40, y: 220, size: 14, font: font }); 
            
            // We write the specific reason text
            const reasonMap = {
                'bank': 'APERTURA CUENTA BANCARIA',
                'house': 'COMPRA DE INMUEBLE',
                'company': 'CONSTITUCION SOCIEDAD'
            };
            const reasonText = reasonMap[document.getElementById('reason').value];
            firstPage.drawText(reasonText, { x: 180, y: 220, size: 8, font: font });

            // SAVE
            const pdfBytes = await pdfDoc.save();
            download(pdfBytes, "EX15_JuroSpain.pdf", "application/pdf");
            document.getElementById('msg').innerText = "âœ… Downloaded!";
            
        } catch (err) {
            alert("Error: Could not load /assets/pdf/ex15.pdf. Please check the file exists.");
        }
    }

    function download(data, filename, type) {
        var file = new Blob([data], {type: type});
        var a = document.createElement("a"),
                url = URL.createObjectURL(file);
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        setTimeout(function() { document.body.removeChild(a); window.URL.revokeObjectURL(url); }, 0); 
    }
</script>
